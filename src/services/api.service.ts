import axios from "axios";
import Rendement from "@/models/Rendement";
import DatedRendement from "@/models/DatedRendement";
import {useDateService} from "@/services/date.service";

const dateService = useDateService();

async function findVille(criteria: string): Promise<string[]>{
  return (await axios.get('/api/find/'+criteria)).data;
}

async function getRendement(): Promise<Rendement[]>{
  try {
    return (await axios.get('/api/model')).data;
  }catch(e){
    return [{"rendement":0.0,"matierSeche":0.0,"matiereSecheTheorique":0.0},{"rendement":0.0,"matierSeche":0.0,"matiereSecheTheorique":0.0},{"rendement":0.0,"matierSeche":0.0,"matiereSecheTheorique":0.0},{"rendement":0.0,"matierSeche":0.0,"matiereSecheTheorique":0.0},{"rendement":0.0,"matierSeche":0.0,"matiereSecheTheorique":0.0},{"rendement":0.0,"matierSeche":0.0,"matiereSecheTheorique":0.0},{"rendement":0.0,"matierSeche":0.0,"matiereSecheTheorique":0.0},{"rendement":0.0,"matierSeche":0.0,"matiereSecheTheorique":0.0},{"rendement":0.0,"matierSeche":0.0,"matiereSecheTheorique":0.0},{"rendement":0.0,"matierSeche":0.0,"matiereSecheTheorique":0.0},{"rendement":0.0,"matierSeche":0.0,"matiereSecheTheorique":0.0},{"rendement":0.0,"matierSeche":0.0,"matiereSecheTheorique":0.0},{"rendement":0.0,"matierSeche":0.0,"matiereSecheTheorique":0.0},{"rendement":0.0,"matierSeche":0.0,"matiereSecheTheorique":0.0},{"rendement":0.0,"matierSeche":0.0,"matiereSecheTheorique":0.0},{"rendement":0.0,"matierSeche":0.0,"matiereSecheTheorique":0.0},{"rendement":0.0,"matierSeche":0.0,"matiereSecheTheorique":0.0},{"rendement":0.0,"matierSeche":0.0,"matiereSecheTheorique":0.0},{"rendement":0.0,"matierSeche":0.0,"matiereSecheTheorique":0.0},{"rendement":0.0,"matierSeche":0.0,"matiereSecheTheorique":0.0},{"rendement":0.0,"matierSeche":0.0,"matiereSecheTheorique":0.0},{"rendement":0.0,"matierSeche":0.0,"matiereSecheTheorique":0.0},{"rendement":0.0,"matierSeche":0.0,"matiereSecheTheorique":0.0},{"rendement":0.0,"matierSeche":0.0,"matiereSecheTheorique":0.0},{"rendement":0.0,"matierSeche":0.0,"matiereSecheTheorique":0.0},{"rendement":0.0,"matierSeche":0.0,"matiereSecheTheorique":0.0},{"rendement":0.0,"matierSeche":0.0,"matiereSecheTheorique":0.0},{"rendement":0.0,"matierSeche":0.0,"matiereSecheTheorique":0.0},{"rendement":0.0,"matierSeche":0.0,"matiereSecheTheorique":0.0},{"rendement":0.0,"matierSeche":0.0,"matiereSecheTheorique":0.0},{"rendement":0.0,"matierSeche":0.0,"matiereSecheTheorique":0.0},{"rendement":0.0,"matierSeche":0.0,"matiereSecheTheorique":0.0},{"rendement":0.0,"matierSeche":0.0,"matiereSecheTheorique":0.0},{"rendement":0.0,"matierSeche":0.0,"matiereSecheTheorique":0.0},{"rendement":0.0,"matierSeche":0.0,"matiereSecheTheorique":0.0},{"rendement":0.0,"matierSeche":0.0,"matiereSecheTheorique":0.0},{"rendement":0.0,"matierSeche":0.0,"matiereSecheTheorique":0.0},{"rendement":0.0,"matierSeche":0.0,"matiereSecheTheorique":0.0},{"rendement":0.0,"matierSeche":0.0,"matiereSecheTheorique":0.0},{"rendement":0.0,"matierSeche":0.0,"matiereSecheTheorique":0.0},{"rendement":0.0,"matierSeche":0.0,"matiereSecheTheorique":0.0},{"rendement":0.0,"matierSeche":0.0,"matiereSecheTheorique":0.0},{"rendement":0.0,"matierSeche":0.0,"matiereSecheTheorique":0.0},{"rendement":0.0,"matierSeche":0.0,"matiereSecheTheorique":0.0},{"rendement":0.0,"matierSeche":0.0,"matiereSecheTheorique":0.0},{"rendement":0.0,"matierSeche":0.0,"matiereSecheTheorique":0.0},{"rendement":0.0,"matierSeche":0.0,"matiereSecheTheorique":0.0},{"rendement":0.0,"matierSeche":0.0,"matiereSecheTheorique":0.0},{"rendement":0.0,"matierSeche":0.0,"matiereSecheTheorique":0.0},{"rendement":0.0,"matierSeche":0.0,"matiereSecheTheorique":0.0},{"rendement":0.0,"matierSeche":0.0,"matiereSecheTheorique":0.0},{"rendement":0.0,"matierSeche":0.0,"matiereSecheTheorique":0.0},{"rendement":0.0,"matierSeche":0.0,"matiereSecheTheorique":0.0},{"rendement":0.0,"matierSeche":0.0,"matiereSecheTheorique":0.0},{"rendement":0.0,"matierSeche":0.0,"matiereSecheTheorique":0.0},{"rendement":0.0,"matierSeche":0.0,"matiereSecheTheorique":0.0},{"rendement":0.0,"matierSeche":0.0,"matiereSecheTheorique":0.0},{"rendement":0.0,"matierSeche":0.0,"matiereSecheTheorique":0.0},{"rendement":0.0,"matierSeche":0.0,"matiereSecheTheorique":0.0},{"rendement":0.0,"matierSeche":0.0,"matiereSecheTheorique":0.0},{"rendement":0.0,"matierSeche":0.0,"matiereSecheTheorique":0.0},{"rendement":0.0,"matierSeche":0.0,"matiereSecheTheorique":0.0},{"rendement":0.0,"matierSeche":0.0,"matiereSecheTheorique":0.0},{"rendement":0.0,"matierSeche":0.0,"matiereSecheTheorique":0.0},{"rendement":0.0,"matierSeche":0.0,"matiereSecheTheorique":0.0},{"rendement":0.0,"matierSeche":0.0,"matiereSecheTheorique":0.0},{"rendement":0.0,"matierSeche":0.0,"matiereSecheTheorique":0.0},{"rendement":0.0,"matierSeche":0.0,"matiereSecheTheorique":0.0},{"rendement":0.0,"matierSeche":0.0,"matiereSecheTheorique":0.0},{"rendement":0.0,"matierSeche":0.0,"matiereSecheTheorique":0.0},{"rendement":0.0,"matierSeche":0.0,"matiereSecheTheorique":0.0},{"rendement":0.0,"matierSeche":0.0,"matiereSecheTheorique":0.0},{"rendement":0.0,"matierSeche":3.0,"matiereSecheTheorique":3.0},{"rendement":0.0,"matierSeche":3.00865437819749,"matiereSecheTheorique":3.00946415022543},{"rendement":0.0,"matierSeche":3.00865437819749,"matiereSecheTheorique":3.00946415022543},{"rendement":0.0,"matierSeche":3.01245949071884,"matiereSecheTheorique":3.01377104401114},{"rendement":0.0,"matierSeche":3.01938149953116,"matiereSecheTheorique":3.02147278585454},{"rendement":0.0,"matierSeche":3.03970841100853,"matiereSecheTheorique":3.04409337530508},{"rendement":0.0,"matierSeche":3.08353619093861,"matiereSecheTheorique":3.09301956092266},{"rendement":0.0,"matierSeche":3.16957037316538,"matiereSecheTheorique":3.18958308576066},{"rendement":0.0,"matierSeche":3.19406317529027,"matiereSecheTheorique":3.21726425277064},{"rendement":0.0,"matierSeche":3.21279774080636,"matiereSecheTheorique":3.23855770364945},{"rendement":0.0,"matierSeche":3.2839128837241,"matiereSecheTheorique":3.31914753172933},{"rendement":0.0,"matierSeche":3.31522028527768,"matiereSecheTheorique":3.35472451266304},{"rendement":0.0,"matierSeche":3.38046957888542,"matiereSecheTheorique":3.43021888800229},{"rendement":0.0,"matierSeche":3.47119536473025,"matiereSecheTheorique":3.53664383574219},{"rendement":0.0,"matierSeche":3.54421836853109,"matiereSecheTheorique":3.62442422749651},{"rendement":0.0,"matierSeche":3.59573725511665,"matiereSecheTheorique":3.68808414350844},{"rendement":0.0,"matierSeche":3.6540794815353,"matiereSecheTheorique":3.76178845706605},{"rendement":0.0,"matierSeche":3.68307464716462,"matiereSecheTheorique":3.79905035772656},{"rendement":0.0,"matierSeche":3.68307464716462,"matiereSecheTheorique":3.79905035772656},{"rendement":0.0,"matierSeche":3.68307464716462,"matiereSecheTheorique":3.79905035772656},{"rendement":0.0,"matierSeche":3.68808042207412,"matiereSecheTheorique":3.80562980036608},{"rendement":0.0,"matierSeche":3.7117773904461,"matiereSecheTheorique":3.83679883830917},{"rendement":0.0,"matierSeche":3.73171814198589,"matiereSecheTheorique":3.8631343677049},{"rendement":0.0,"matierSeche":3.78040102044104,"matiereSecheTheorique":3.92791520655536},{"rendement":0.0,"matierSeche":3.85140759679259,"matiereSecheTheorique":4.0234272570804},{"rendement":0.0,"matierSeche":3.89339151038503,"matiereSecheTheorique":4.0810474781615},{"rendement":0.0,"matierSeche":4.04567844961887,"matiereSecheTheorique":4.29449016326058},{"rendement":0.0,"matierSeche":4.14683977273111,"matiereSecheTheorique":4.44066771324144},{"rendement":0.0,"matierSeche":4.34069904444045,"matiereSecheTheorique":4.73448164808863},{"rendement":0.0,"matierSeche":4.54103806079488,"matiereSecheTheorique":5.05412804395809},{"rendement":0.0,"matierSeche":4.74468177987045,"matiereSecheTheorique":5.40419874163156},{"rendement":0.0,"matierSeche":4.92940638390125,"matiereSecheTheorique":5.74735647224833},{"rendement":0.0,"matierSeche":5.03428324243489,"matiereSecheTheorique":5.95789656343233},{"rendement":0.0,"matierSeche":5.22441366026331,"matiereSecheTheorique":6.36354812067783},{"rendement":0.0,"matierSeche":5.29789741343981,"matiereSecheTheorique":6.52969493942671},{"rendement":0.0,"matierSeche":5.49708016920746,"matiereSecheTheorique":7.00701351011556},{"rendement":0.0,"matierSeche":5.65779177570928,"matiereSecheTheorique":7.41350957405243},{"rendement":0.0,"matierSeche":5.71956236334157,"matiereSecheTheorique":7.58248023711801},{"rendement":0.0,"matierSeche":5.86041405900049,"matiereSecheTheorique":7.98799575312957},{"rendement":0.0,"matierSeche":6.03198737924688,"matiereSecheTheorique":8.50336280493924},{"rendement":0.0,"matierSeche":6.11113401884586,"matiereSecheTheorique":8.75808091980982},{"rendement":0.0,"matierSeche":6.14962421740282,"matiereSecheTheorique":8.88951766764347},{"rendement":0.0,"matierSeche":6.18318381982135,"matiereSecheTheorique":9.00738210942146},{"rendement":0.0,"matierSeche":6.25019494726738,"matiereSecheTheorique":9.24662326319249},{"rendement":0.0,"matierSeche":6.29068341636594,"matiereSecheTheorique":9.39412148488975},{"rendement":0.0,"matierSeche":6.34201948199956,"matiereSecheTheorique":9.58599086843252},{"rendement":0.0,"matierSeche":6.4004243134467,"matiereSecheTheorique":9.80897505755706},{"rendement":0.0,"matierSeche":6.56557538339291,"matiereSecheTheorique":10.4557408137354},{"rendement":0.0,"matierSeche":6.74350490847077,"matiereSecheTheorique":11.1625797006839},{"rendement":0.0,"matierSeche":7.27758318358425,"matiereSecheTheorique":13.1684477145796},{"rendement":0.0,"matierSeche":7.8556340978559,"matiereSecheTheorique":15.2094379977802},{"rendement":0.0,"matierSeche":8.00891849136923,"matiereSecheTheorique":15.6911737620144},{"rendement":0.0,"matierSeche":8.40406285887832,"matiereSecheTheorique":16.6197933590891},{"rendement":0.0,"matierSeche":8.81727056473069,"matiereSecheTheorique":17.4383271086189},{"rendement":0.0,"matierSeche":9.33674118871381,"matiereSecheTheorique":18.4377380065918},{"rendement":0.0,"matierSeche":9.64050800656406,"matiereSecheTheorique":18.9791517575076},{"rendement":0.0,"matierSeche":9.97834278948942,"matiereSecheTheorique":19.5340106076762},{"rendement":0.0,"matierSeche":10.3621028653023,"matiereSecheTheorique":20.1162388459766},{"rendement":0.0,"matierSeche":11.5229906190046,"matiereSecheTheorique":21.8233153767639},{"rendement":0.0,"matierSeche":12.4838769224798,"matiereSecheTheorique":23.2468617158742},{"rendement":0.0,"matierSeche":14.2201598617316,"matiereSecheTheorique":25.7775594156676},{"rendement":0.0,"matierSeche":16.4630926048136,"matiereSecheTheorique":28.8303353004835},{"rendement":0.0,"matierSeche":18.3437958324342,"matiereSecheTheorique":31.348710687807},{"rendement":0.0,"matierSeche":19.4193190500334,"matiereSecheTheorique":32.6891910589103},{"rendement":0.0,"matierSeche":22.2365816508404,"matiereSecheTheorique":35.8973292957761},{"rendement":0.0,"matierSeche":26.0325263357992,"matiereSecheTheorique":40.1122054641496},{"rendement":0.0,"matierSeche":29.2393916601224,"matiereSecheTheorique":43.7800562170754},{"rendement":0.0,"matierSeche":36.0335087827781,"matiereSecheTheorique":51.3379878591693},{"rendement":0.0,"matierSeche":44.1046433155338,"matiereSecheTheorique":60.2576507530007},{"rendement":0.0,"matierSeche":54.0119739028041,"matiereSecheTheorique":71.4678052605756},{"rendement":0.0,"matierSeche":65.9104156784425,"matiereSecheTheorique":84.7333016407872},{"rendement":0.0,"matierSeche":79.017007599132,"matiereSecheTheorique":99.6027309868948},{"rendement":0.0,"matierSeche":82.2439060336003,"matiereSecheTheorique":103.39908699558},{"rendement":0.0,"matierSeche":88.8194461492783,"matiereSecheTheorique":111.000032989154},{"rendement":0.0,"matierSeche":100.844341278115,"matiereSecheTheorique":124.488893070101},{"rendement":0.0,"matierSeche":105.348131605527,"matiereSecheTheorique":129.7498902215},{"rendement":0.0,"matierSeche":112.158734611541,"matiereSecheTheorique":137.604635873319},{"rendement":0.0,"matierSeche":117.354652549328,"matiereSecheTheorique":143.527850442738},{"rendement":0.0,"matierSeche":124.783431434376,"matiereSecheTheorique":152.071294774421},{"rendement":0.0,"matierSeche":129.720758060965,"matiereSecheTheorique":157.877274176363},{"rendement":0.0,"matierSeche":146.88524080755,"matiereSecheTheorique":178.834714584418},{"rendement":0.0,"matierSeche":166.087283742001,"matiereSecheTheorique":204.700138043911},{"rendement":0.0,"matierSeche":176.269998542227,"matiereSecheTheorique":220.546969934198},{"rendement":0.0,"matierSeche":180.965553549005,"matiereSecheTheorique":228.63137657084},{"rendement":0.0,"matierSeche":190.594335085,"matiereSecheTheorique":245.855902688345},{"rendement":0.0,"matierSeche":195.398241593118,"matiereSecheTheorique":255.14930658726},{"rendement":0.0,"matierSeche":205.60520461253,"matiereSecheTheorique":276.285751282288},{"rendement":0.0,"matierSeche":215.262330715414,"matiereSecheTheorique":299.351331325256},{"rendement":0.0,"matierSeche":221.031089967209,"matiereSecheTheorique":312.333445089807},{"rendement":0.0,"matierSeche":229.155442093755,"matiereSecheTheorique":330.493963387691},{"rendement":0.0,"matierSeche":233.95021480013,"matiereSecheTheorique":342.202744695412},{"rendement":0.0,"matierSeche":244.380393692357,"matiereSecheTheorique":363.839733307056},{"rendement":0.0,"matierSeche":253.899348846779,"matiereSecheTheorique":384.88771840711},{"rendement":0.0,"matierSeche":264.157463770046,"matiereSecheTheorique":409.635730681888},{"rendement":0.0,"matierSeche":275.570083024522,"matiereSecheTheorique":439.472326069322},{"rendement":0.0,"matierSeche":284.666895706875,"matiereSecheTheorique":465.857554255551},{"rendement":0.0,"matierSeche":292.895638158313,"matiereSecheTheorique":491.401446666942},{"rendement":0.0,"matierSeche":304.181303462995,"matiereSecheTheorique":526.02409663199},{"rendement":0.0,"matierSeche":311.69872637691,"matiereSecheTheorique":548.790461698491},{"rendement":0.0,"matierSeche":314.582939071331,"matiereSecheTheorique":557.37315416207},{"rendement":0.0,"matierSeche":321.768515917416,"matiereSecheTheorique":578.414832739433},{"rendement":1.23337246508615,"matierSeche":331.171476851767,"matiereSecheTheorique":605.851320934755},{"rendement":2.68558357331071,"matierSeche":342.502491864072,"matiereSecheTheorique":638.770152919563},{"rendement":3.03020844630872,"matierSeche":356.621651811985,"matiereSecheTheorique":679.821788922549},{"rendement":3.42341137541879,"matierSeche":369.49103588115,"matiereSecheTheorique":718.085025043813},{"rendement":3.88226922141056,"matierSeche":382.027940067015,"matiereSecheTheorique":756.12867710375},{"rendement":4.27993191580433,"matierSeche":394.33529038673,"matiereSecheTheorique":794.230711366239},{"rendement":4.79705585454975,"matierSeche":407.868496573249,"matiereSecheTheorique":837.063387825971},{"rendement":5.47890649627084,"matierSeche":420.837828157149,"matiereSecheTheorique":879.102843955431},{"rendement":6.25559935925228,"matierSeche":433.391110191544,"matiereSecheTheorique":920.552114986544},{"rendement":7.0976911386087,"matierSeche":445.818136702676,"matiereSecheTheorique":962.323177952118},{"rendement":8.02725361827813,"matierSeche":458.091016823597,"matiereSecheTheorique":1004.33655198728},{"rendement":9.30332058132791,"matierSeche":466.390293712276,"matiereSecheTheorique":1033.26560296763},{"rendement":10.7712596766377,"matierSeche":476.394376276347,"matiereSecheTheorique":1068.27404443361},{"rendement":12.5468210233721,"matierSeche":486.334374043533,"matiereSecheTheorique":1103.22295259681},{"rendement":14.6358265418211,"matierSeche":494.125191925602,"matiereSecheTheorique":1130.58570576802},{"rendement":16.9832704478372,"matierSeche":505.675873400482,"matiereSecheTheorique":1170.66426369982},{"rendement":19.6841189175452,"matierSeche":514.470388935033,"matiereSecheTheorique":1200.90730667852},{"rendement":22.5625450414536,"matierSeche":520.94940938659,"matiereSecheTheorique":1222.67976398463},{"rendement":25.45837259322,"matierSeche":530.503278332826,"matiereSecheTheorique":1253.76609790048},{"rendement":28.4337916545127,"matierSeche":540.699002512541,"matiereSecheTheorique":1286.09810555479},{"rendement":32.1031123336843,"matierSeche":545.663114974757,"matiereSecheTheorique":1301.4314508467},{"rendement":34.1456314019099,"matierSeche":560.277070479414,"matiereSecheTheorique":1325.32272892943},{"rendement":35.3439899098002,"matierSeche":568.694429793827,"matiereSecheTheorique":1340.52597018125},{"rendement":36.6636352594929,"matierSeche":579.36270026204,"matiereSecheTheorique":1359.70378133723},{"rendement":39.2799168165616,"matierSeche":602.653214051988,"matiereSecheTheorique":1400.64849375396},{"rendement":39.8487592828933,"matierSeche":606.172538488533,"matiereSecheTheorique":1407.92968685564},{"rendement":40.7694260588882,"matierSeche":614.301262912021,"matiereSecheTheorique":1425.33074074454},{"rendement":42.1016469721662,"matierSeche":626.557526665487,"matiereSecheTheorique":1453.51447558447},{"rendement":43.5324695319024,"matierSeche":639.804539794264,"matiereSecheTheorique":1487.48886105567},{"rendement":44.9013504336232,"matierSeche":652.450252053212,"matiereSecheTheorique":1524.27670949202},{"rendement":46.1630642689032,"matierSeche":664.053012044131,"matiereSecheTheorique":1562.99228655103},{"rendement":47.1416614938691,"matierSeche":672.89552987559,"matiereSecheTheorique":1595.05630253153},{"rendement":48.0091767570218,"matierSeche":680.653460329487,"matiereSecheTheorique":1624.71942320674},{"rendement":49.11324388052,"matierSeche":690.886883583802,"matiereSecheTheorique":1665.40611756671},{"rendement":50.1564904218015,"matierSeche":700.565024016385,"matiereSecheTheorique":1705.49177242604},{"rendement":51.1122460475244,"matierSeche":709.408472681929,"matiereSecheTheorique":1743.70954016814},{"rendement":51.9778358460958,"matierSeche":717.390728943734,"matiereSecheTheorique":1779.75195674046},{"rendement":52.9514426148998,"matierSeche":726.497278162466,"matiereSecheTheorique":1822.7638737923},{"rendement":53.6625338086402,"matierSeche":733.024728841079,"matiereSecheTheorique":1855.03800783296},{"rendement":54.1965437903298,"matierSeche":737.827520711067,"matiereSecheTheorique":1879.90214885297},{"rendement":54.3223653814284,"matierSeche":738.577613686742,"matiereSecheTheorique":1883.96644864023},{"rendement":54.863615643436,"matierSeche":743.506097922654,"matiereSecheTheorique":1904.73366060391},{"rendement":55.8092143108921,"matierSeche":752.386791430182,"matiereSecheTheorique":1948.5221562933},{"rendement":56.0372064861467,"matierSeche":754.098733165229,"matiereSecheTheorique":1958.85259632945},{"rendement":56.4984983597494,"matierSeche":758.189040426564,"matiereSecheTheorique":1984.01417779554},{"rendement":56.6790197846813,"matierSeche":759.482299744233,"matiereSecheTheorique":1992.42610753926},{"rendement":57.286151612784,"matierSeche":765.091156087118,"matiereSecheTheorique":2025.28869259539},{"rendement":57.903992717281,"matierSeche":770.774927199617,"matiereSecheTheorique":2065.97626314841},{"rendement":58.4839453048171,"matierSeche":776.101002679032,"matiereSecheTheorique":2105.34283747252},{"rendement":58.4839453048171,"matierSeche":781.1147420728,"matiereSecheTheorique":2143.52185079458},{"rendement":58.4839453048171,"matierSeche":781.1147420728,"matiereSecheTheorique":0.0},{"rendement":58.4839453048171,"matierSeche":781.1147420728,"matiereSecheTheorique":0.0},{"rendement":58.4839453048171,"matierSeche":781.1147420728,"matiereSecheTheorique":0.0},{"rendement":58.4839453048171,"matierSeche":781.1147420728,"matiereSecheTheorique":0.0},{"rendement":58.4839453048171,"matierSeche":781.1147420728,"matiereSecheTheorique":0.0},{"rendement":58.4839453048171,"matierSeche":781.1147420728,"matiereSecheTheorique":0.0},{"rendement":58.4839453048171,"matierSeche":781.1147420728,"matiereSecheTheorique":0.0},{"rendement":58.4839453048171,"matierSeche":781.1147420728,"matiereSecheTheorique":0.0},{"rendement":58.4839453048171,"matierSeche":781.1147420728,"matiereSecheTheorique":0.0},{"rendement":58.4839453048171,"matierSeche":781.1147420728,"matiereSecheTheorique":0.0},{"rendement":58.4839453048171,"matierSeche":781.1147420728,"matiereSecheTheorique":0.0},{"rendement":58.4839453048171,"matierSeche":781.1147420728,"matiereSecheTheorique":0.0},{"rendement":58.4839453048171,"matierSeche":781.1147420728,"matiereSecheTheorique":0.0},{"rendement":58.4839453048171,"matierSeche":781.1147420728,"matiereSecheTheorique":0.0},{"rendement":58.4839453048171,"matierSeche":781.1147420728,"matiereSecheTheorique":0.0},{"rendement":58.4839453048171,"matierSeche":781.1147420728,"matiereSecheTheorique":0.0},{"rendement":58.4839453048171,"matierSeche":781.1147420728,"matiereSecheTheorique":0.0},{"rendement":58.4839453048171,"matierSeche":781.1147420728,"matiereSecheTheorique":0.0},{"rendement":58.4839453048171,"matierSeche":781.1147420728,"matiereSecheTheorique":0.0},{"rendement":58.4839453048171,"matierSeche":781.1147420728,"matiereSecheTheorique":0.0},{"rendement":58.4839453048171,"matierSeche":781.1147420728,"matiereSecheTheorique":0.0},{"rendement":58.4839453048171,"matierSeche":781.1147420728,"matiereSecheTheorique":0.0},{"rendement":58.4839453048171,"matierSeche":781.1147420728,"matiereSecheTheorique":0.0},{"rendement":58.4839453048171,"matierSeche":781.1147420728,"matiereSecheTheorique":0.0},{"rendement":58.4839453048171,"matierSeche":781.1147420728,"matiereSecheTheorique":0.0},{"rendement":58.4839453048171,"matierSeche":781.1147420728,"matiereSecheTheorique":0.0},{"rendement":58.4839453048171,"matierSeche":781.1147420728,"matiereSecheTheorique":0.0},{"rendement":58.4839453048171,"matierSeche":781.1147420728,"matiereSecheTheorique":0.0},{"rendement":58.4839453048171,"matierSeche":781.1147420728,"matiereSecheTheorique":0.0},{"rendement":58.4839453048171,"matierSeche":781.1147420728,"matiereSecheTheorique":0.0},{"rendement":58.4839453048171,"matierSeche":781.1147420728,"matiereSecheTheorique":0.0}];
  }
}

async function getDatedRendement( startDate: Date): Promise<DatedRendement[]>{
  const rendement = await getRendement();
  let currDate = startDate;
  return rendement.map((rendement, index) => {
    const datedRend: DatedRendement = {
      ...rendement,
      date: dateService.formatToIsoLocalDate(currDate)
    };
    currDate = dateService.rollUpDate(currDate);
    return datedRend;
  })
}

function flattenAsChartData(rendement: DatedRendement[]): any[] {
  const keys = Object.keys(rendement[0]);
  const flattenedData: any[] = keys.map( key => [key]);
  rendement.forEach( (val : any) => {
    keys.forEach( (key, index) => flattenedData[index].push(val[key]))
  });
  return flattenedData;
}

export function useApiService() {
  return {
    findVille,
    getRendement,
    getDatedRendement,
    flattenAsChartData
  }
}
